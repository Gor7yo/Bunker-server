# üìã –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

## üîç –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ PM2

### 1. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
```bash
ssh root@195.80.51.69
```

### 2. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```bash
# –í—Å–µ –ª–æ–≥–∏ (out + err)
pm2 logs bunker-server

# –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
pm2 logs bunker-server --lines 100

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
pm2 logs bunker-server --err

# –¢–æ–ª—å–∫–æ –≤—ã–≤–æ–¥
pm2 logs bunker-server --out
```

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∏–∑ —Ñ–∞–π–ª–æ–≤
```bash
cd /opt/bunker-server/server

# –õ–æ–≥–∏ –≤—ã–≤–æ–¥–∞
tail -f logs/out.log

# –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
tail -f logs/err.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫
tail -n 50 logs/out.log logs/err.log
```

### 4. –ü–æ–∏—Å–∫ –≤ –ª–æ–≥–∞—Ö
```bash
# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep -i error logs/err.log
grep -i error logs/out.log

# –ü–æ–∏—Å–∫ mediasoup
grep -i mediasoup logs/out.log logs/err.log

# –ü–æ–∏—Å–∫ –ø–æ ID –∏–≥—Ä–æ–∫–∞
grep "mhp553i5hqj091j7rr" logs/out.log logs/err.log
```

### 5. –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤
```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª
pm2 logs bunker-server --lines 1000 > server_logs.txt

# –ò–ª–∏ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª—ã
cat logs/out.log logs/err.log > all_logs.txt
```

## üîç –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ mediasoup:

### –£—Å–ø–µ—à–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
```
‚úÖ Mediasoup –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
üì° Router RTP capabilities: {...}
```

### –ó–∞–ø—Ä–æ—Å—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞:
```
üì° [playerId] –ó–∞–ø—Ä–æ—Å router_rtp_capabilities
üöö [playerId] –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞: send
üöö [playerId] –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞: recv
üîå [playerId] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞: send
üìπ [playerId] –°–æ–∑–¥–∞–Ω–∏–µ producer: video
üìπ [playerId] –°–æ–∑–¥–∞–Ω–∏–µ producer: audio
```

### –û—à–∏–±–∫–∏:
```
‚ùå [playerId] –û—à–∏–±–∫–∞ create_transport: ...
‚ùå [playerId] –û—à–∏–±–∫–∞ produce: ...
‚ùå Mediasoup –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
pm2 monit

# –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 status

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
pm2 describe bunker-server
```

## üÜò –ï—Å–ª–∏ –ª–æ–≥–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—à–∏–±–∫–∏

–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ mediasoup –≤–∫–ª—é—á–µ–Ω:
```bash
# –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
pm2 env 0

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: USE_MEDIASOUP: 'true'
```

–ï—Å–ª–∏ –Ω–µ—Ç - –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
```bash
pm2 delete bunker-server
pm2 start ecosystem.config.js
pm2 save
```

