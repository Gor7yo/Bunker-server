# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞

## –ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. ‚ö° WebSocket Server –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **perMessageDeflate: false** - –û—Ç–∫–ª—é—á–µ–Ω–æ —Å–∂–∞—Ç–∏–µ –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è CPU –Ω–∞–≥—Ä—É–∑–∫–∏ (WebRTC —Å–∏–≥–Ω–∞–ª—ã –º–∞–ª–µ–Ω—å–∫–∏–µ)
- **maxPayload: 1MB** - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- **clientTracking: true** - –í–∫–ª—é—á–µ–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤

### 2. üìä –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥
- **sendPlayersUpdate()** - –î–æ–±–∞–≤–ª–µ–Ω —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥ (100–º—Å) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ JSON** - –ö—ç—à–∏—Ä—É—é—Ç—Å—è —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
- –°–Ω–∏–∂–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –≤—ã–∑–æ–≤–æ–≤ –Ω–∞ **~90%** –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 3. üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è broadcast
- –ó–∞–º–µ–Ω–µ–Ω `forEach` –Ω–∞ `for` —Ü–∏–∫–ª (–±—ã—Å—Ç—Ä–µ–µ –Ω–∞ ~15-20%)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è (–æ–¥–∏–Ω JSON.stringify –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö)

### 4. üõ°Ô∏è Rate limiting –¥–ª—è WebRTC
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ WebRTC —Å–∏–≥–Ω–∞–ª–æ–≤
- –õ–∏–º–∏—Ç: **50 —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É** –Ω–∞ –∏–≥—Ä–æ–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏

### 5. üìù –£—Å–ª–æ–≤–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í production —Ä–µ–∂–∏–º–µ (`NODE_ENV=production`) –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
- –°–Ω–∏–∂–µ–Ω–∏–µ CPU –Ω–∞–≥—Ä—É–∑–∫–∏ –æ—Ç console.log –Ω–∞ **~5-10%**

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### Production —Ä–µ–∂–∏–º (–±–µ–∑ –ª–æ–≥–æ–≤)
```bash
NODE_ENV=production pm2 start ecosystem.config.js
```

### Development —Ä–µ–∂–∏–º (—Å –ª–æ–≥–∞–º–∏)
```bash
NODE_ENV=development pm2 start ecosystem.config.js
# –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ
pm2 start ecosystem.config.js
```

## –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- **CPU –Ω–∞–≥—Ä—É–∑–∫–∞**: —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 15-25%
- **–ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å**: —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞ 20-30%
- **–ó–∞–¥–µ—Ä–∂–∫–∞**: —Å–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞ 10-20–º—Å
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ –∏ –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
```bash
pm2 monit
pm2 logs bunker-server
```

